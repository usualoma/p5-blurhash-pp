use strict;
use warnings;
use Test::More 0.98;
use BlurHash::PP qw(decode_blurhash);

my %test_data = (
    'UXJ@wMRQx]sm^,Wnx]f,?^ShNLX7tnRjWAkW' => [
        [   [ 217, 233, 241 ],
            [ 216, 229, 236 ],
            [ 213, 218, 225 ],
            [ 212, 208, 212 ],
            [ 213, 205, 207 ],
            [ 217, 210, 211 ],
            [ 223, 220, 221 ],
            [ 228, 230, 231 ],
            [ 232, 235, 238 ],
            [ 233, 237, 240 ]
        ],
        [   [ 215, 224, 229 ],
            [ 213, 220, 224 ],
            [ 209, 210, 213 ],
            [ 206, 199, 200 ],
            [ 206, 195, 193 ],
            [ 210, 199, 196 ],
            [ 216, 208, 205 ],
            [ 221, 218, 216 ],
            [ 225, 225, 224 ],
            [ 227, 228, 228 ]
        ],
        [   [ 208, 200, 195 ],
            [ 205, 196, 190 ],
            [ 199, 187, 179 ],
            [ 192, 175, 164 ],
            [ 188, 167, 152 ],
            [ 190, 166, 150 ],
            [ 196, 173, 158 ],
            [ 203, 184, 172 ],
            [ 208, 196, 186 ],
            [ 211, 204, 195 ]
        ],
        [   [ 198, 165, 146 ],
            [ 194, 162, 141 ],
            [ 183, 154, 129 ],
            [ 170, 140, 110 ],
            [ 163, 126, 88 ],
            [ 163, 117, 75 ],
            [ 170, 122, 83 ],
            [ 179, 138, 107 ],
            [ 185, 158, 132 ],
            [ 189, 173, 149 ]
        ],
        [   [ 185, 132, 97 ],
            [ 179, 130, 93 ],
            [ 165, 120, 80 ],
            [ 149, 105, 53 ],
            [ 138, 84,  0 ],
            [ 138, 69,  0 ],
            [ 147, 75,  0 ],
            [ 158, 100, 43 ],
            [ 165, 128, 87 ],
            [ 169, 147, 111 ]
        ],
        [   [ 171, 117, 82 ],
            [ 165, 113, 79 ],
            [ 151, 103, 70 ],
            [ 134, 88,  56 ],
            [ 124, 72,  40 ],
            [ 127, 67,  35 ],
            [ 138, 80,  51 ],
            [ 149, 102, 74 ],
            [ 155, 124, 94 ],
            [ 158, 139, 107 ]
        ],
        [   [ 160, 123, 103 ],
            [ 155, 119, 102 ],
            [ 143, 111, 99 ],
            [ 131, 102, 97 ],
            [ 127, 99,  99 ],
            [ 133, 105, 105 ],
            [ 143, 117, 113 ],
            [ 152, 130, 120 ],
            [ 155, 140, 125 ],
            [ 155, 147, 127 ]
        ],
        [   [ 154, 136, 123 ],
            [ 151, 134, 123 ],
            [ 144, 130, 123 ],
            [ 138, 127, 125 ],
            [ 139, 129, 128 ],
            [ 146, 136, 133 ],
            [ 154, 145, 137 ],
            [ 159, 152, 140 ],
            [ 159, 156, 142 ],
            [ 157, 158, 142 ]
        ],
        [   [ 152, 146, 130 ],
            [ 151, 146, 131 ],
            [ 149, 147, 134 ],
            [ 149, 148, 136 ],
            [ 152, 151, 135 ],
            [ 158, 155, 134 ],
            [ 163, 159, 133 ],
            [ 164, 162, 135 ],
            [ 162, 164, 139 ],
            [ 158, 164, 144 ]
        ],
        [   [ 154, 151, 127 ],
            [ 154, 153, 129 ],
            [ 154, 157, 134 ],
            [ 157, 161, 136 ],
            [ 161, 163, 130 ],
            [ 165, 163, 120 ],
            [ 167, 162, 112 ],
            [ 166, 162, 114 ],
            [ 162, 164, 125 ],
            [ 158, 166, 136 ]
        ]
    ],
    'UUDwRJNf0i$|9Gs,%LNItTWXWAWCNgW?oIs.' => [
        [   [ 0,   103, 184 ],
            [ 0,   105, 184 ],
            [ 0,   110, 185 ],
            [ 59,  119, 185 ],
            [ 98,  129, 185 ],
            [ 119, 135, 182 ],
            [ 123, 136, 179 ],
            [ 107, 128, 175 ],
            [ 65,  114, 173 ],
            [ 0,   98,  171 ]
        ],
        [   [ 0,   102, 178 ],
            [ 0,   104, 179 ],
            [ 0,   111, 179 ],
            [ 75,  120, 180 ],
            [ 108, 130, 179 ],
            [ 125, 136, 176 ],
            [ 127, 136, 173 ],
            [ 110, 129, 171 ],
            [ 71,  114, 169 ],
            [ 0,   98,  168 ]
        ],
        [   [ 0,   101, 165 ],
            [ 0,   104, 165 ],
            [ 59,  112, 166 ],
            [ 100, 122, 165 ],
            [ 126, 133, 164 ],
            [ 139, 139, 162 ],
            [ 137, 139, 160 ],
            [ 119, 131, 160 ],
            [ 84,  116, 161 ],
            [ 4,   100, 162 ]
        ],
        [   [ 0,   102, 153 ],
            [ 35,  105, 153 ],
            [ 80,  112, 152 ],
            [ 115, 124, 151 ],
            [ 138, 135, 149 ],
            [ 150, 143, 147 ],
            [ 148, 144, 147 ],
            [ 130, 135, 149 ],
            [ 95,  119, 152 ],
            [ 38,  100, 154 ]
        ],
        [   [ 33,  106, 151 ],
            [ 51,  107, 150 ],
            [ 83,  114, 149 ],
            [ 115, 125, 148 ],
            [ 141, 138, 146 ],
            [ 156, 149, 144 ],
            [ 156, 151, 144 ],
            [ 139, 142, 146 ],
            [ 103, 122, 148 ],
            [ 38,  99,  151 ]
        ],
        [   [ 44,  113, 160 ],
            [ 51,  113, 160 ],
            [ 73,  117, 160 ],
            [ 104, 127, 159 ],
            [ 136, 143, 158 ],
            [ 158, 156, 157 ],
            [ 164, 160, 155 ],
            [ 149, 151, 154 ],
            [ 109, 128, 153 ],
            [ 20,  99,  153 ]
        ],
        [   [ 51,  121, 174 ],
            [ 51,  121, 174 ],
            [ 63,  124, 175 ],
            [ 96,  135, 176 ],
            [ 134, 152, 176 ],
            [ 162, 167, 175 ],
            [ 172, 172, 172 ],
            [ 159, 162, 168 ],
            [ 117, 137, 164 ],
            [ 17,  104, 160 ]
        ],
        [   [ 61,  129, 183 ],
            [ 62,  130, 184 ],
            [ 74,  135, 187 ],
            [ 106, 147, 190 ],
            [ 144, 165, 191 ],
            [ 173, 180, 191 ],
            [ 184, 184, 188 ],
            [ 170, 174, 182 ],
            [ 129, 148, 175 ],
            [ 51,  116, 170 ]
        ],
        [   [ 74,  135, 186 ],
            [ 79,  137, 188 ],
            [ 98,  146, 192 ],
            [ 130, 161, 197 ],
            [ 163, 179, 200 ],
            [ 188, 192, 201 ],
            [ 196, 195, 197 ],
            [ 181, 184, 191 ],
            [ 143, 159, 184 ],
            [ 82,  129, 178 ]
        ],
        [   [ 85,  138, 185 ],
            [ 94,  142, 187 ],
            [ 118, 154, 193 ],
            [ 150, 171, 199 ],
            [ 180, 189, 204 ],
            [ 201, 201, 205 ],
            [ 205, 202, 202 ],
            [ 190, 190, 196 ],
            [ 154, 167, 189 ],
            [ 104, 140, 184 ]
        ]
    ],
);

while ( my ( $hash, $data ) = each %test_data ) {
    subtest $hash => sub {
        is_deeply decode_blurhash( $hash, 10, 10 ), $data;
    };
}

done_testing;
